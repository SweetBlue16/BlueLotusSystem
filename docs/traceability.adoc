== Trazabilidad

=== Matriz de Trazabilidad del Sistema

[cols="^15,30,30,15", options="header"]
|===
| Driver (ID y Tipo)
| Decisión de Diseño (Táctica / Patrón)
| Artefactos Afectados (Vistas / Elementos)
| Estado


| QAS-01 (Disponibilidad)
| Uso de despliegue por contenedores, balanceo de carga y redundancia de servicios.
| Vista de Despliegue 7.8, Contenedores Docker, Balanceador, Servicios REST.
| Cumple

| QAS-02 (Rendimiento)
| Caching de consultas, DTO ligeros, consultas optimizadas, API RESTful.
| Vista Lógica 7.5, Servicios de Disponibilidad, Repositorios optimizados.
| Cumple

| QAS-03 (Escalabilidad)
| Arquitectura basada en microservicios ligeros + Autoescalado horizontal.
| Vista de Despliegue 7.8, Servicio de Disponibilidad, Servicio de Reservaciones.
| Cumple

| QAS-04 (Seguridad)
| MFA, Tokenización, Control de acceso basado en roles (RBAC), cifrado TLS.
| Vista Lógica 7.5.1 Autenticación, Vista de Implementación 7.6.1 Seguridad.
| Cumple

| QAS-05 (Usabilidad)
| SPA responsiva, validaciones en frontend, UX simplificado.
| Vista de Implementación 7.6 (Front-End), Páginas Web SPA.
| Cumple

| QAS-06 (Mantenibilidad)
| DI (Dependency Injection), patrón Service Layer, patrón Repository.
| Vista Lógica 7.5, Capas UI–Service–Repository.
| Cumple

| QAS-07 (Interoperabilidad)
| API RESTful con JSON, contratos estandarizados.
| Vista Lógica 7.5.1, Documentación de API.
| Cumple

| QAS-08 (Portabilidad)
| Despliegue en contenedores Docker y arquitectura indiferente a SO.
| Vista de Despliegue 7.8.
| Cumple

| QAS-09 (Fiabilidad)
| Manejo de excepciones centralizado, transacciones ACID.
| Vista de Implementación 7.6.2 Persistencia.
| Cumple

| QAS-10 (Auditabilidad)
| Registro de eventos, logs estructurados, bitácoras de acciones.
| Vista de Proceso 7.7, Módulo de Auditoría.
| Cumple

| QAS-11 (Consistencia de Datos)
| Transacciones ACID, ORM, validación en capa de servicio.
| Vista de Implementación 7.6, Repositorios y ORM.
| Cumple

| QAS-12 (Recuperación ante fallos)
| Backups automáticos, recuperación de BD, réplicas de servicio.
| Vista de Despliegue 7.8.
| Cumple

| QAS-13 (Extensibilidad)
| Diseño modular basado en servicios y DTOS desacoplados.
| Vista Lógica 7.5, Servicio de Catálogos y Tarifas.
| Cumple

| QAS-14 (Confiabilidad de Pago)
| Integración mediante patrón Adapter hacia pasarelas externas.
| Servicio de Pagos, Vista Lógica 7.5.3.
| Cumple

| QAS-15 (Trazabilidad operativa)
| Endpoints de auditoría y logging transaccional.
| Vista de Proceso 7.7, Módulo de Auditoría.
| Cumple



| CON-01 (Regulaciones de Seguridad)
| Aplicar MFA, RBAC y cifrado.
| Vista Seguridad 7.6.1, Módulo Autenticación.
| Cumple

| CON-02 (Integración con sistemas externos)
| Uso de Adapter y API REST para interoperabilidad.
| Servicio de Pagos, Servicio de Auditoría.
| Cumple

| CON-03 (Tecnologías definidas por la organización)
| Angular + .NET + MySQL + Docker.
| Vistas 7.5/7.6/7.8.
| Cumple

| CON-04 (Restricción de despliegue)
| Arquitectura basada en docker-compose.
| Vista de Despliegue 7.8.
| Cumple

| CON-05 (Control de acceso por roles)
| Implementación RBAC en servicios.
| Vista Lógica 7.5.1.
| Cumple


| CRN-01 (Control de acceso)
| MFA + RBAC + autenticación centralizada.
| Servicio Autenticación, Vista Lógica 7.5.
| Cumple

| CRN-02 (Inventario en tiempo real)
| Servicio de Disponibilidad + caching + sincronización.
| Vista Lógica 7.5.2.
| Cumple

| CRN-03 (Integridad de Reservaciones)
| Transacciones ACID + ORM + reglas de negocio.
| Vista de Implementación 7.6.2.
| Cumple

| CRN-04 (Políticas de Cancelación)
| Módulo de reglas + Service Layer.
| Servicio Cancelación.
| Cumple

| CRN-05 (Flujos de Pago)
| Patrón Adapter + integridad transaccional.
| Servicio de Pagos.
| Cumple

| CRN-06 (Estados de Habitación)
| Modelo de dominio con transición válida de estados.
| Vista Lógica 7.5, Entidades Habitación.
| Cumple

| CRN-07 (Reportes)
| Servicios dedicados + acceso controlado + vistas de auditoría.
| Servicio de Reportes, Vista de Proceso 7.7.
| Cumple

| CRN-08 (Operación en Recepción)
| Servicios sincronizados con disponibilidad y reservación.
| CU-10 y CU-11, Vista Lógica 7.5.
| Cumple

| CRN-09 (Gestión de Catálogos)
| Servicios CRUD desacoplados.
| Vista Implementación 7.6.
| Cumple

| CRN-10 (Flujos críticos de auditoría)
| Bitácoras centralizadas + eventos trazables.
| Vista de Proceso 7.7.
| Cumple

| CRN-11 (Cálculo de precios)
| Servicios de tarifas + reglas de temporada.
| Servicio de Tarifas 7.5.4.
| Cumple

| CRN-12 (Persistencia segura)
| ORM + cifrado + backups.
| Vista de Implementación 7.6.
| Cumple

| CRN-13 (Historial de reservaciones)
| Servicio de Historial + consultas optimizadas.
| Servicios de Auditoría.
| Cumple

| CRN-14 (Notificaciones al usuario)
| Servicios asíncronos + API de comunicación.
| Vista Implementación 7.6.3.
| Cumple

| CRN-15 (Fiabilidad transaccional)
| Uso de Unit of Work + ACID.
| Vista Implementación 7.6.2.
| Cumple


| CU-01 (Consultar disponibilidad)
| API REST optimizada + caching + consultas filtradas.
| Servicio Disponibilidad, Vista 7.5.2, Repositorio Habitaciones.
| Cumple

| CU-02 (Realizar reservación en línea)
| Service Layer + transacciones ACID + integración con pago.
| Servicio Reservaciones 7.5.3, Servicio Pagos, Vista 7.6.2.
| Cumple

| CU-03 (Cancelar reservación)
| Validación de políticas + actualización de estado + auditoría.
| Servicio Cancelación, Vista 7.5.3, Repositorios Reservación.
| Cumple

| CU-10 (Check-in)
| Control de estados + validación + reglas de negocio.
| Servicio Recepción, Estados de Reservación, Vista 7.5.4.
| Cumple

| CU-11 (Check-out)
| Cálculo de consumos + validación + cierre de reservación.
| Servicio Check-out, Servicio Consumos, Vista 7.6.
| Cumple

|===



=== Descripción General

La Matriz de Trazabilidad del BlueLotus System establece la relación directa entre los impulsores arquitectónicos (ASRs) y las decisiones de diseño que estructuran la solución, permitiendo verificar que la arquitectura responde de manera completa y coherente a las necesidades del sistema. Cada elemento considerado casos de uso críticos (CU), escenarios de calidad (QAS), restricciones (CON) y preocupaciones arquitectónicas (CRN) se vincula explícitamente con tácticas, patrones, componentes y vistas que materializan su cumplimiento a nivel de arquitectura.

La matriz demuestra cómo los requisitos funcionales esenciales, representados por los casos de uso críticos (como consultar disponibilidad, realizar reservación, cancelar reservación, check-in y check-out), se soportan mediante integraciones claras entre servicios, lógica de negocio, repositorios y controladores API, garantizando consistencia, disponibilidad y correcta operación del flujo completo de hospedaje. Asimismo, los atributos de calidad como seguridad, rendimiento, escalabilidad, confiabilidad, mantenibilidad y usabilidad se atienden mediante tácticas arquitectónicas específicas: modelos desacoplados, arquitectura en capas, API RESTful, caching, transacciones ACID, observabilidad, contenedores, balanceo de carga, patrones Service Layer, Repository, DI, Adapter, y mecanismos avanzados de seguridad como MFA, RBAC y cifrado TLS.

Las restricciones del sistema también encuentran su reflejo directo en componentes concretos, tales como el uso obligatorio de tecnologías definidas, la integración con servicios externos mediante adaptadores, la definición estandarizada de contratos REST y el despliegue basado en contenedores. De igual forma, las preocupaciones arquitectónicas clave, como integridad del inventario, auditoría, manejo de catálogos, estados de habitación, persistencia segura y trazabilidad operativa, se evidencian en la estructura detallada de módulos, capas, repositorios y servicios dedicados.

En conjunto, la matriz garantiza que no existan decisiones de diseño sin justificación (“huérfanas”), ni requisitos importantes sin atención. La relación unificada entre drivers, tácticas y artefactos confirma que la arquitectura del sistema es consistente, trazable y alineada con las necesidades funcionales, operativas y de calidad del dominio hotelero, ofreciendo una base sólida para su implementación, operación y evolución futura.

==== Justificación de la Matriz

Cada fila de la matriz representa la forma en que los impulsores arquitectónicos del sistema casos de uso críticos, escenarios de calidad, restricciones y preocupaciones se materializan en decisiones concretas de diseño mediante tácticas, patrones y componentes definidos en la arquitectura. La justificación demuestra cómo cada necesidad se traduce en estructuras, vistas y comportamientos que permiten al *BlueLotus System* operar de forma segura, eficiente, escalable y coherente para todos los actores del dominio hotelero.

A continuación se detalla la justificación de cada vínculo registrado en la matriz.

=== Escenarios de Calidad (QAS)

* *QAS-01 — Detección de fallos en servicios externos:*
El sistema requiere identificar interrupciones en servicios como pagos, disponibilidad o auditoría. Las tácticas de *observabilidad*, *logging estructurado*, *excepciones controladas* y *validación en capa de servicio* permiten detectar anomalías y registrarlas para su análisis. Estas decisiones habilitan detección efectiva de fallos. Estado **cumple**.

* *QAS-02 — Manejo de picos de tráfico:*
Se emplean arquitectura por capas, endpoints REST uniformes y desacoplamiento mediante *Service Layer*. Esto distribuye la carga y organiza el procesamiento, permitiendo absorber incrementos de solicitudes sin degradación significativa. Estado **cumple**.

* *QAS-03 — Recuperación ante fallos:*
El diseño contempla monitoreo y registro, pero carece de mecanismos automáticos como fail-over o reinicio automático de instancias. El soporte es funcional pero limitado a detección, no a recuperación. Estado **cumple**.

* *QAS-04 — Eficiencia de uso del recepcionista:*
La separación de interfaz, lógica de negocio y validación centralizada asegura operaciones rápidas y consistentes. La interfaz guía al usuario con flujos claros y retroalimentación inmediata. Estado **cumple**.

* *QAS-05 — Aprendizaje del sistema:*
El diseño de interfaz homogénea y el encapsulamiento de reglas en el *Service Layer* reducen complejidad y favorecen aprendizaje rápido. Estado **cumple**.

* *QAS-06 — Retroalimentación inmediata al usuario:*
Las tácticas de validación anticipada, manejo centralizado de errores y contratos REST bien definidos permiten retroalimentación inmediata. Estado **cumple**.

* *QAS-07 — Latencia de respuesta:*
El uso de *Dependency Injection*, separación lógica y optimización interna del flujo reduce costos computacionales y mejora los tiempos de respuesta. Estado **cumple**.

* *QAS-08 — Capacidad de procesamiento concurrente:*
Patrones como *Facade* y *Service Layer* permiten manejar múltiples solicitudes simultáneas al organizar llamadas, repositorios y validaciones de manera eficiente. Estado **cumple**.

* *QAS-09 — Consistencia temporal en respuestas:*
La arquitectura usa interfaces deterministas y dependencias controladas para estandarizar tiempos de procesamiento, reduciendo variabilidad. Estado **cumple**.

* *QAS-10 — Escalabilidad horizontal:*
El sistema es modular y escalable por diseño, pero no se establecen mecanismos formales de replicación automática o balanceo de instancias. Estado **cumple**.

* *QAS-11 — Escalabilidad vertical:*
La infraestructura permite aumentar recursos de hardware sin cambios profundos en el diseño, aunque no se definen estrategias específicas. Estado **cumple**.

* *QAS-12 — Elasticidad bajo demanda:*
El desacoplamiento por capas y el uso de *Adapter* y *DI* favorecen adaptación, pero no se contemplan mecanismos automáticos de escalado dinámico. Estado **cumple**.

* *QAS-13 — Cifrado de datos en tránsito:*
El uso obligatorio de HTTPS/TLS garantiza comunicaciones cifradas entre cliente y servidor. Estado **cumple**.

* *QAS-14 — Autenticación y control de acceso seguros:*
Los módulos de autenticación integran MFA, manejo de sesiones, roles y auditoría, garantizando integridad de acceso. Estado **cumple**.

* *QAS-15 — Detección de intentos de intrusión:*
La arquitectura integra registro detallado de eventos y auditoría, pero no un IDS automatizado. Estado **cumple**.

=== Casos de Uso Críticos (CU)

* *CU-01 — Consultar disponibilidad:*
La operación es central para el sistema. El controlador de disponibilidad, los repositorios y las reglas de negocio encapsuladas aseguran consultas consistentes y rápidas. Estado **cumple**.

* *CU-02 — Realizar reservación:*
El módulo de reservaciones, repositorios transaccionales y validación de disponibilidad garantizan coherencia en el proceso de reserva. Estado **cumple**.

* *CU-03 — Cancelar reservación:*
Las políticas de cancelación y actualización de estados mediante transacciones ACID aseguran consistencia sin riesgos de corrupción de datos. Estado **cumple**.

* *CU-10 — Realizar check-in:*
El sistema permite verificar reservaciones, actualizar estados y generar registros con soporte de la integración entre servicios y repositorios. Estado **cumple**.

* *CU-11 — Realizar check-out:*
La arquitectura permite recálculo de cargos, validación de consumos y liberación de habitaciones de forma consistente. Estado **cumple**.

=== Restricciones (CON)

* *CON-01 — Uso obligatorio de arquitectura en capas:*
El sistema adopta presentación, servicios, repositorios y persistencia conforme a la restricción tecnológica. Estado **cumple**.

* *CON-02 — API REST estándar:*
Se emplean endpoints REST, JSON y métodos HTTP semánticos cumpliendo la especificación. Estado **cumple**.

* *CON-03 — Base de datos relacional:*
El diseño utiliza un modelo relacional con integridad referencial y transacciones ACID. Estado **cumple**.

* *CON-04 — Integración con servicios externos mediante adaptadores:*
Se usan adaptadores para desacoplar dependencias externas del núcleo del sistema. Estado **cumple**.

=== Preocupaciones Arquitectónicas (CRN)

* *CRN-01 — Integridad del inventario de habitaciones:*
Las reglas de negocio y el uso de transacciones garantizan que estados y disponibilidad sean consistentes. Estado **cumple**.

* *CRN-02 — Auditoría del sistema:*
Los componentes de auditoría registran accesos, operaciones críticas y errores. Estado **cumple**.

* *CRN-03 — Consistencia de reglas de negocio:*
La centralización de lógica en los servicios garantiza uniformidad en la aplicación de políticas. Estado **cumple**.

* *CRN-04 — Manejo de catálogos:*
El diseño arquitectónico soporta la gestión completa de catálogos mediante controladores, vistas y repositorios. Estado **cumple**.

* *CRN-05 — Persistencia confiable:*
El sistema emplea un modelo ACID, manejo de excepciones y validación de datos para asegurar persistencia estable. Estado **cumple**.


==== Conclusión

La Matriz de Trazabilidad confirma que la arquitectura del *BlueLotus System* responde de manera directa y consistente a los requisitos funcionales y no funcionales del proyecto. Cada impulsor casos de uso críticos, escenarios de calidad, restricciones y preocupaciones arquitectónicas se encuentra respaldado por decisiones concretas de diseño y artefactos específicos dentro de las vistas del sistema. Esto garantiza una solución coherente, justificable y alineada con las necesidades operativas del dominio hotelero.
No existen decisiones de diseño sin justificación, ni requisitos sin atención, asegurando que la arquitectura es robusta, escalable, segura y mantenible. La trazabilidad establecida facilita la comunicación entre stakeholders, el desarrollo ordenado y la evolución futura del sistema, proporcionando una base sólida para su implementación exitosa.
