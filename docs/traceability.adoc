== Trazabilidad

=== Matriz de Trazabilidad del Sistema

[cols="^15,30,30,15", options="header"]
|===
| Driver (ID y Tipo)
| Decisión de Diseño (Táctica / Patrón)
| Artefactos Afectados (Vistas / Elementos)
| Estado


| QAS-01 (Disponibilidad)
| Uso de despliegue por contenedores, balanceo de carga y redundancia de servicios.
| Vista de Despliegue 7.8, Contenedores Docker, Balanceador, Servicios REST.
| Cumple

| QAS-02 (Rendimiento)
| Caching de consultas, DTO ligeros, consultas optimizadas, API RESTful.
| Vista Lógica 7.5, Servicios de Disponibilidad, Repositorios optimizados.
| Cumple

| QAS-03 (Escalabilidad)
| Arquitectura basada en microservicios ligeros + Autoescalado horizontal.
| Vista de Despliegue 7.8, Servicio de Disponibilidad, Servicio de Reservaciones.
| Cumple

| QAS-04 (Seguridad)
| MFA, Tokenización, Control de acceso basado en roles (RBAC), cifrado TLS.
| Vista Lógica 7.5.1 Autenticación, Vista de Implementación 7.6.1 Seguridad.
| Cumple

| QAS-05 (Usabilidad)
| SPA responsiva, validaciones en frontend, UX simplificado.
| Vista de Implementación 7.6 (Front-End), Páginas Web SPA.
| Cumple

| QAS-06 (Mantenibilidad)
| DI (Dependency Injection), patrón Service Layer, patrón Repository.
| Vista Lógica 7.5, Capas UI–Service–Repository.
| Cumple

| QAS-07 (Interoperabilidad)
| API RESTful con JSON, contratos estandarizados.
| Vista Lógica 7.5.1, Documentación de API.
| Cumple

| QAS-08 (Portabilidad)
| Despliegue en contenedores Docker y arquitectura indiferente a SO.
| Vista de Despliegue 7.8.
| Cumple

| QAS-09 (Fiabilidad)
| Manejo de excepciones centralizado, transacciones ACID.
| Vista de Implementación 7.6.2 Persistencia.
| Cumple

| QAS-10 (Auditabilidad)
| Registro de eventos, logs estructurados, bitácoras de acciones.
| Vista de Proceso 7.7, Módulo de Auditoría.
| Cumple

| QAS-11 (Consistencia de Datos)
| Transacciones ACID, ORM, validación en capa de servicio.
| Vista de Implementación 7.6, Repositorios y ORM.
| Cumple

| QAS-12 (Recuperación ante fallos)
| Backups automáticos, recuperación de BD, réplicas de servicio.
| Vista de Despliegue 7.8.
| Cumple

| QAS-13 (Extensibilidad)
| Diseño modular basado en servicios y DTOS desacoplados.
| Vista Lógica 7.5, Servicio de Catálogos y Tarifas.
| Cumple

| QAS-14 (Confiabilidad de Pago)
| Integración mediante patrón Adapter hacia pasarelas externas.
| Servicio de Pagos, Vista Lógica 7.5.3.
| Cumple

| QAS-15 (Trazabilidad operativa)
| Endpoints de auditoría y logging transaccional.
| Vista de Proceso 7.7, Módulo de Auditoría.
| Cumple



| CON-01 (Regulaciones de Seguridad)
| Aplicar MFA, RBAC y cifrado.
| Vista Seguridad 7.6.1, Módulo Autenticación.
| Cumple

| CON-02 (Integración con sistemas externos)
| Uso de Adapter y API REST para interoperabilidad.
| Servicio de Pagos, Servicio de Auditoría.
| Cumple

| CON-03 (Tecnologías definidas por la organización)
| Angular + .NET + PostgreSQL + Docker.
| Vistas 7.5/7.6/7.8.
| Cumple

| CON-04 (Restricción de despliegue)
| Arquitectura basada en docker-compose.
| Vista de Despliegue 7.8.
| Cumple

| CON-05 (Control de acceso por roles)
| Implementación RBAC en servicios.
| Vista Lógica 7.5.1.
| Cumple


| CRN-01 (Control de acceso)
| MFA + RBAC + autenticación centralizada.
| Servicio Autenticación, Vista Lógica 7.5.
| Cumple

| CRN-02 (Inventario en tiempo real)
| Servicio de Disponibilidad + caching + sincronización.
| Vista Lógica 7.5.2.
| Cumple

| CRN-03 (Integridad de Reservaciones)
| Transacciones ACID + ORM + reglas de negocio.
| Vista de Implementación 7.6.2.
| Cumple

| CRN-04 (Políticas de Cancelación)
| Módulo de reglas + Service Layer.
| Servicio Cancelación.
| Cumple

| CRN-05 (Flujos de Pago)
| Patrón Adapter + integridad transaccional.
| Servicio de Pagos.
| Cumple

| CRN-06 (Estados de Habitación)
| Modelo de dominio con transición válida de estados.
| Vista Lógica 7.5, Entidades Habitación.
| Cumple

| CRN-07 (Reportes)
| Servicios dedicados + acceso controlado + vistas de auditoría.
| Servicio de Reportes, Vista de Proceso 7.7.
| Cumple

| CRN-08 (Operación en Recepción)
| Servicios sincronizados con disponibilidad y reservación.
| CU-10 y CU-11, Vista Lógica 7.5.
| Cumple

| CRN-09 (Gestión de Catálogos)
| Servicios CRUD desacoplados.
| Vista Implementación 7.6.
| Cumple

| CRN-10 (Flujos críticos de auditoría)
| Bitácoras centralizadas + eventos trazables.
| Vista de Proceso 7.7.
| Cumple

| CRN-11 (Cálculo de precios)
| Servicios de tarifas + reglas de temporada.
| Servicio de Tarifas 7.5.4.
| Cumple

| CRN-12 (Persistencia segura)
| ORM + cifrado + backups.
| Vista de Implementación 7.6.
| Cumple

| CRN-13 (Historial de reservaciones)
| Servicio de Historial + consultas optimizadas.
| Servicios de Auditoría.
| Cumple

| CRN-14 (Notificaciones al usuario)
| Servicios asíncronos + API de comunicación.
| Vista Implementación 7.6.3.
| Cumple

| CRN-15 (Fiabilidad transaccional)
| Uso de Unit of Work + ACID.
| Vista Implementación 7.6.2.
| Cumple


| CU-01 (Consultar disponibilidad)
| API REST optimizada + caching + consultas filtradas.
| Servicio Disponibilidad, Vista 7.5.2, Repositorio Habitaciones.
| Cumple

| CU-02 (Realizar reservación en línea)
| Service Layer + transacciones ACID + integración con pago.
| Servicio Reservaciones 7.5.3, Servicio Pagos, Vista 7.6.2.
| Cumple

| CU-03 (Cancelar reservación)
| Validación de políticas + actualización de estado + auditoría.
| Servicio Cancelación, Vista 7.5.3, Repositorios Reservación.
| Cumple

| CU-10 (Check-in)
| Control de estados + validación + reglas de negocio.
| Servicio Recepción, Estados de Reservación, Vista 7.5.4.
| Cumple

| CU-11 (Check-out)
| Cálculo de consumos + validación + cierre de reservación.
| Servicio Check-out, Servicio Consumos, Vista 7.6.
| Cumple

|===



=== Descripción General

La Matriz de Trazabilidad del BlueLotus System establece la relación directa entre los impulsores arquitectónicos (ASRs) y las decisiones de diseño que estructuran la solución, permitiendo verificar que la arquitectura responde de manera completa y coherente a las necesidades del sistema. Cada elemento considerado —casos de uso críticos (CU), escenarios de calidad (QAS), restricciones (CON) y preocupaciones arquitectónicas (CRN)— se vincula explícitamente con tácticas, patrones, componentes y vistas que materializan su cumplimiento a nivel de arquitectura.

La matriz demuestra cómo los requisitos funcionales esenciales, representados por los casos de uso críticos (como consultar disponibilidad, realizar reservación, cancelar reservación, check-in y check-out), se soportan mediante integraciones claras entre servicios, lógica de negocio, repositorios y controladores API, garantizando consistencia, disponibilidad y correcta operación del flujo completo de hospedaje. Asimismo, los atributos de calidad —como seguridad, rendimiento, escalabilidad, confiabilidad, mantenibilidad y usabilidad— se atienden mediante tácticas arquitectónicas específicas: modelos desacoplados, arquitectura en capas, API RESTful, caching, transacciones ACID, observabilidad, contenedores, balanceo de carga, patrones Service Layer, Repository, DI, Adapter, y mecanismos avanzados de seguridad como MFA, RBAC y cifrado TLS.

Las restricciones del sistema también encuentran su reflejo directo en componentes concretos, tales como el uso obligatorio de tecnologías definidas, la integración con servicios externos mediante adaptadores, la definición estandarizada de contratos REST y el despliegue basado en contenedores. De igual forma, las preocupaciones arquitectónicas clave, como integridad del inventario, auditoría, manejo de catálogos, estados de habitación, persistencia segura y trazabilidad operativa, se evidencian en la estructura detallada de módulos, capas, repositorios y servicios dedicados.

En conjunto, la matriz garantiza que no existan decisiones de diseño sin justificación (“huérfanas”), ni requisitos importantes sin atención. La relación unificada entre drivers, tácticas y artefactos confirma que la arquitectura del sistema es consistente, trazable y alineada con las necesidades funcionales, operativas y de calidad del dominio hotelero, ofreciendo una base sólida para su implementación, operación y evolución futura.

==== Justificación de la Matriz

Cada fila de la matriz refleja la respuesta del diseño ante los escenarios de calidad (QAS-01 a QAS-15) definidos en el Capítulo 4 del Hito 3, vinculándolos con las tácticas y patrones documentados en las secciones *5.2 Iteraciones del Diseño*, *6.2 Justificación de las Decisiones* y *7.2 Vista de Implementación*.
A continuación se detalla la justificación de cada vínculo:

* *QAS-01 — Detección de fallos en servicio de pagos:*
El sistema requiere detectar fallos oportunamente en el microservicio de pagos para preservar la disponibilidad. En la documentación se establecen tácticas de *observabilidad* y *registro centralizado* dentro del *Service Layer*, las cuales permiten monitorear el estado del servicio. Por tanto, el diseño **cumple** con el escenario planteado.

* *QAS-02 — Manejo de picos de tráfico:*
La Iteración 2  aborda explícitamente el manejo de carga mediante *arquitectura en capas* y comunicación *REST/JSON*. Estas decisiones permiten distribuir el tráfico entre servicios, garantizando una disponibilidad ≥95%. Se marca como **cumple**.

* *QAS-03 — Recuperación automática del servicio:*
Aunque el diseño lógico habilita detección de fallos, no se documentan mecanismos automáticos de recuperación o fail-over. El soporte está limitado a *observabilidad* y *registro de eventos*. Por ello, el cumplimiento es **parcial**.

* *QAS-04 — Eficiencia de uso del recepcionista:*
La *Iteración 1* define la *capa de presentación* con *frontend web* y *app móvil*, separando la interfaz de la lógica de negocio. Esto facilita tareas rápidas y coherentes, satisfaciendo el atributo de *eficiencia de uso*. Se considera **cumple**.

* *QAS-05 — Aprendizaje del sistema:*
El uso de una interfaz unificada y coherente entre plataformas reduce la curva de aprendizaje. El *Service Layer* encapsula reglas y mantiene consistencia de flujo. Se marca **cumple**.

* *QAS-06 — Retroalimentación inmediata:*
El Hito 3 documenta validaciones y mensajes de error contextualizados en la capa de presentación. Las tácticas de *validación anticipada* y *contratos REST claros* garantizan feedback en tiempo real. Estado **cumple**.

* *QAS-07 — Latencia de respuesta:*
La Iteración 2 define tácticas de *encapsulamiento* y *inyección de dependencias* para optimizar tiempos de ejecución. Estas reducen el acoplamiento y mejoran la eficiencia. Estado **cumple**.

* *QAS-08 — Capacidad de procesamiento:*
Se emplean patrones *Service Layer* y *Facade* para soportar múltiples solicitudes concurrentes. Las interfaces REST desacopladas permiten procesar grandes volúmenes de peticiones. Estado **cumple**.

* *QAS-09 — Consistencia temporal:*
El uso de contratos estables y de inyección de dependencias garantiza uniformidad en los tiempos de respuesta. Las interfaces deterministas minimizan la variabilidad temporal. Estado **cumple**.

* *QAS-10 — Escalabilidad horizontal:*
El diseño modular y por servicios lógicos admite crecimiento horizontal, pero no se documentan mecanismos de *replicación ni balanceo de instancias*. Capítulo 9 propone su análisis futuro. Estado **parcial**.

* *QAS-11 — Escalabilidad vertical:*
De forma similar, la estructura por capas permite aprovechar hardware más potente sin reescribir componentes, aunque el comportamiento bajo mayor capacidad no se prueba. Estado **parcial**.

* *QAS-12 — Elasticidad:*
El sistema es modular y adaptable mediante *Adapter Pattern* y *Dependency Injection*, pero no se implementa auto-escalado dinámico. Estado **parcial**.

* *QAS-13 — Cifrado de datos en tránsito:*
El Hito 3 define explícitamente el uso de *HTTPS/TLS 1.3*, garantizando comunicación segura cliente-servidor. Estado **cumple**.

* *QAS-14 — Autenticación multifactor:*
Los módulos *GestorDeUsuarios* e *IAutenticación* reflejan tácticas de autenticación centralizada y control de acceso. El diseño apoya MFA y registro de auditoría. Estado **cumple**.

* *QAS-15 — Detección de intentos de intrusión:*
Se documenta *observabilidad y registro de eventos* en el módulo de auditoría, pero no un sistema IDS/IPS automatizado. Se considera **parcial**.

==== Conclusión

La matriz demuestra la alineación entre los requisitos de calidad definidos en los QAS y las decisiones arquitectónicas adoptadas en el diseño del *BlueLotus System*.
Los escenarios con estado **cumple** evidencian que las tácticas implementadas responden efectivamente a los requerimientos críticos del sistema, mientras que los marcados como **parcial** representan oportunidades de mejora identificadas para iteraciones futuras o etapas de despliegue (Capítulo 9).
En conjunto, la trazabilidad asegura la coherencia entre la visión del sistema, sus atributos de calidad y los artefactos que los materializan.
